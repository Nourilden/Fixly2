<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fixly</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .profileimg-ball {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #00F0FF;
      box-shadow: 0 0 8px #00F0FF55;
      position: absolute;
      top: 18px;
      right: 24px;
      background: #fff;
      transition: box-shadow 0.2s, border 0.2s;
      z-index: 10;
    }
    .profileimg-ball:hover {
      box-shadow: 0 0 16px #00F0FF99;
      border: 2.5px solid #00838F;
      cursor: pointer;
    }
    header { position: relative; }
  </style>
</head>
<body>
  <header>
    <h1 class="name">Fixly</h1>
    <div class="btns">
<a href="Get_Started.html"> <button class="btn" id="getStartedBtn" onclick="onLoginSuccess()">Get Started</button></a>
<a href="Profile.html"><img alt="Profileimg" class="profileimg-ball" id="profileimg-ball"></a> 
    </div>

  </header>
  <main class="main">
    <textarea placeholder="Enter your code here..." class="codearea" id="codearea"></textarea>

    <div class="lang-wrapper">
      <h3 class="lan_text">Language :</h3>
      <select id="language" class="language">
        <option value="" disabled selected>Select a language</option>
        <!-- Grouped by categories for better readability -->
        <optgroup label="Popular">
          <option value="javascript">JavaScript</option>
          <option value="python">Python</option>
          <option value="java">Java</option>
          <option value="csharp">C#</option>
          <option value="cpp">C++</option>
        </optgroup>
        <optgroup label="Web">
          <option value="html">HTML</option>
          <option value="css">CSS</option>
          <option value="php">PHP</option>
          <option value="typescript">TypeScript</option>
        </optgroup>
        <optgroup label="Others">
          <option value="ruby">Ruby</option>
          <option value="go">Go</option>
          <option value="swift">Swift</option>
          <option value="kotlin">Kotlin</option>
          <option value="sql">SQL</option>
          <option value="bash">Bash</option>
          <option value="r">R</option>
          <option value="dart">Dart</option>
          <option value="rust">Rust</option>
          <!-- Add more if needed -->
        </optgroup>
      </select>
    </div>
    <div class="btns">
      <button class="btn" id="runBtn" onclick="sendCode()">Run Code</button>
      <button class="btn" id="clearBtn" onclick="clearCode()">Clear</button>
    </div>

</main>
  <footer>
    <p class="copy">&copy; 2025 Fixly. All rights reserved.</p>  
  </footer>
  <script src="script.js"></script>
  <script>
    // Set small profile image (ball) from localStorage
    (function() {
      const img = document.getElementById('profileimg-ball');
      let user = JSON.parse(localStorage.getItem('user'));
      img.src = (user && user.image) ? user.image : 'default.png';
      img.title = user && user.name ? user.name : 'Profile';
      img.onclick = function() {
        toggleProfile(true);
      };
    })();
    // Function to run code
    function runCode() {
      const code = document.getElementById('codearea').value;
      const language = document.getElementById('language').value;

      if (!code.trim()) {
        alert('Please enter some code to run.');
        return;
      }

      if (!language) {
        alert('Please select a programming language.');
        return;
      }
window.location.href = `thinking.html?code=${encodeURIComponent(code)}&language=${encodeURIComponent(language)}`;
    }
    
function sendCode() {
  const code = document.getElementById("codearea").value;
  localStorage.setItem("submittedCode", code);
  window.location.href = "thinking.html";
}

  </script>
</body>
</html>